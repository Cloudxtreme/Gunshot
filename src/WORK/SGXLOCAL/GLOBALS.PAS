{$I DEFINES.INC}
UNIT Globals;


INTERFACE


USES Gx2_Bp,Tx2_Bp,ApTimer,MkMsgAbs,Shotgun;


CONST DontSend               : String[3] = #1#2#3;
CONST MaxMsgBuffer           = 48000;
CONST MaxMsgWidth            = 79;
CONST MaxPick                = 600;
CONST NumCutouts             = 15;
CONST XORLine                = 255;


TYPE LiPoint3D               = RECORD
     X,Y,Z                   : LongInt;
     END;
TYPE Saved_Cutouts           = RECORD
     Cutout                  : GXHeader;
     Active                  : Boolean;
     Coordinates             : Array[1..4] Of Word;
     KeepWindow              : Boolean;
     FileName                : String[40];
     MoveX                   : Integer;
     MoveY                   : Integer;
     WindowDef               : _Raw_File;
     END;
TYPE ButtonInfo              = RECORD
     Return                  : Char;
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     BType                   : Byte;
     FillC                   : Byte;
     HBorder                 : Byte;
     DBorder                 : Byte;
     Holdable                : Boolean;
     END;
TYPE Screen_Info             = RECORD
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     OrigX1                  : Word;
     OrigY1                  : Word;
     OrigX2                  : Word;
     OrigY2                  : Word;
     HasWindow               : Boolean;
     MoveX                   : Integer;
     MoveY                   : Integer;
     END;
TYPE Poly_Points             = Array[0..32000] Of Integer;
TYPE FieldInfo               = RECORD
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     Text                    : String[70];
     CursorPos               : Byte;
     EntryType               : Byte;
     Length                  : Byte;
     Active                  : Boolean;
     TextBack                : Byte;
     TextEnabled             : Byte;
     TextDisabled            : Byte;
     END;
TYPE Custom_Controls         = RECORD
     Icon1                   : GXHeader;
     Icon2                   : GXHeader;
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     END;
TYPE Animated_Controls       = RECORD
     Icon                    : Array[1..8] Of GXHeader;
     Current                 : Word;
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     END;
TYPE Animated_Record         = Array[1..10] Of Animated_Controls;
TYPE Custom_Record           = Array[1..20] Of Custom_Controls;
TYPE Button_Record           = Array[1..40] Of ButtonInfo;
TYPE Field_Record            = Array[1..15] Of FieldInfo;
TYPE Pick_Info               = RECORD
     Active                  : Boolean;
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     Top                     : Word;
     NumItems                : Word;
     ItemsOnScrn             : Word;
     Current                 : Word;
     MaxChars                : Word;
     Locator                 : Word;
     Pickable                : Boolean;
     UsingDisk               : Boolean;
     END;
TYPE Pick_List               = RECORD
     Line                    : String[100];
     Pickable                : Boolean;
     TrueIndex               : Word;
     END;
TYPE Massive_Pick            = Array[1..MaxPick] Of Pick_List;
TYPE BigQWKBuffer            = Array[1..MaxMsgBuffer] Of Char;
TYPE QWK_Header              = RECORD
     MSGStatus               : Char;
     MSGNumber               : Array[1..7] Of Char;
     MSGDate                 : Array[1..8] Of Char;
     MSGTime                 : Array[1..5] Of Char;
     MSGTo                   : Array[1..25] Of Char;
     MSGFrom                 : Array[1..25] Of Char;
     MSGSubj                 : Array[1..25] Of Char;
     MSGPassword             : Array[1..12] Of Char;
     MSGReference            : Array[1..8] Of Char;
     MSGNumText              : Array[1..6] Of Char;
     MSGKilled               : Byte;
     MSGConf                 : Word;
     Spare1                  : Word;
     Spare2                  : Char;
     END;
TYPE Message_Header          = RECORD
     MsgNumber               : Longint;
     FirstText               : Longint;
     NumberText              : Longint;
     MsgFrom                 : String[78];
     MsgTo                   : String[78];
     MsgSubject              : String[78];
     MsgTime                 : Longint;
     MsgDate                 : String[6];
     SeeAlso                 : Longint;
     Reply                   : Longint;
     Local                   : Boolean;
     Echo                    : Boolean;
     Sent                    : Boolean;
     KillSent                : Boolean;
     Recv                    : Boolean;
     Priv                    : Boolean;
     Crash                   : Boolean;
     FileAttach              : Boolean;
     FileRequest             : Boolean;
     Delete                  : Boolean;
     Hold                    : Boolean;
     Dest                    : AddrType;
     Orig                    : AddrType;
     END;
TYPE ListRecord              = RECORD
     MsgTo                   : String[30];
     MsgFrom                 : String[30];
     MsgSubject              : String[30];
     MsgPrivate              : Boolean;
     MsgRecv                 : Boolean;
     MsgNum                  : Word;
     END;
TYPE BSingle                 = Array [0..3] Of Byte;
TYPE QWK_Index               = RECORD
     Mks                     : BSingle;
     Scrap                   : Byte;
     END;
TYPE QWKLastRead             = RECORD
     Area                    : String[51];
     Pointer                 : Word;
     DoReceived              : Boolean;
     DoPointer               : Boolean;
     MaxMsgs                 : Word;
     END;
TYPE Msg_Index               = Array[1..3000] Of Word;
TYPE BufferItem              = RECORD
     Token                   : String[80];
     Replacement             : String[100];
     END;
TYPE Work_Buffer             = Array [1..110] Of BufferItem;
TYPE Toggle_Info             = RECORD
     Total                   : Longint;
     Current                 : Longint;
     Last                    : Longint;
     Active                  : Boolean;
     x1                      : Word;
     y1                      : Word;
     x2                      : Word;
     y2                      : Word;
     Colour                  : Byte;
     Horizontal              : Boolean;
     END;
TYPE Comm_Msg                = RECORD
     UserName                : String[30];
     UserAlias               : String[30];
     Line                    : String[60];
     END;
TYPE CC_Info                 = RECORD
     UserName                : String[30];
     END;
TYPE Pager                   = RECORD
     UserName                : String[30];
     UserAlias               : String[30];
     Message                 : String[30];
     LineNumber              : Word;
     END;
TYPE FileDescriptions2       = Array[1..18] Of _FileDescriptions;
TYPE FileSearchIndexes       = RECORD
     Path                    : String[40];
     Area_Num                : Longint;
     Area_Sub                : Longint;
     Area_Name               : String[40];
     CD_Rom                  : Byte;
     END;
TYPE MessageTextLines        = RECORD
     Line                    : String[MaxMsgWidth];
     END;
TYPE TaggedFileRecord        = RECORD
     FileName                : String[12];
     FilePath                : String[40];
     Size                    : Longint;
     CDRom                   : Boolean;
     Description             : String[25];
     FreeFile                : Boolean;
     FileArea                : Word;
     FileSub                 : Word;
     TransferOk              : Boolean;
     FileCPS                 : Longint;
     END;
TYPE Menus                   = Array[1..150] Of _Menu_Record;
TYPE BIGTagged               = Array[1..15] Of TaggedFileRecord;
TYPE GFX_Buffer              = Array[0..32767] Of Byte;
TYPE BigLastCallers          = Array[0..10] Of _Last10Callers_Record;
TYPE MessageBody             = Array[1..MaxMsgBuffer] Of Char;
TYPE OnScreen1               = Array[1..17] Of String[88];
TYPE Locators1               = Array[1..3000] Of Word;

VAR  FArcDefs                : File Of _Archiver_Record;
     FBadLang                : File Of _BadLang_Record;
     FCallers                : File Of _Last10Callers_Record;
     FColours                : File Of _SysColourSVGA;
     FFileArea               : File Of _FileArea_Record;
     FFileArea2              : File Of _FileArea_Record;
     FFileDefs               : File Of _FileDefinitions;
     FFileDefs2              : File Of _FileDefinitions;
     FFileDesc               : File Of _FileDescriptions;
     FFileDesc2              : File Of _FileDescriptions;
     FFileSubs               : File Of _FileSub_Record;
     FLangDir                : File Of _LanguageDirs_Record;
     FLastUserOnline         : File Of _Lasthuman_Record;
     FMailerInfo             : File Of _Mailer_Record;
     FMessageArea            : File Of _MessageArea_Record;
     FMessageArea2           : File Of _MessageArea_Record;
     FMessageSubs            : File Of _MessageSub_Record;
     FNames                  : File Of _ScreenNames_Record;
     FNetWorkInfo            : File Of _Network_Record;
     FNewUserVGA             : File Of _NewUserVGA_Record;
     FNodeF                  : File Of _NodeFile_Record;
     FNodeF2                 : File Of _NodeFile_Record;
     FNodeInfo               : File Of _Node_Record;
     FOpening                : File Of _Opening_Record;
     FProtocolInfo           : File Of _Protocols_Record;
     FReports                : File Of _Report_Record;
     FScanners               : File Of _VirusScanners_Record;
     FShuttle                : File Of _Shuttle_Record;
     FSystemInfo             : File Of _SystemDat_Record;
     FTotals                 : File Of _SystemCalls_Record;
     FUserAccess             : File Of _Access_Record;
     FUserRecord             : File Of _UsersBBS_Record;
     FUUCP                   : File Of _UUCP_Record;
     FVerifier               : File Of _VerifyLog_Record;
     FCDRoms                 : File Of _CDRom_Record;
     FArcUtils               : File Of _Archiver_Utilities;
     FFreqs                  : File Of _FreqRecord;
     FRequestFile            : File Of _RequestFile;
     FNetOrigins             : File Of _Origin_Record;
     NetOrigins              : _Origin_Record;
     RequestFile             : _RequestFile;
     Freqs                   : _FreqRecord;
     ArcUtils                : _Archiver_Utilities;
     CDRoms                  : _CDRom_Record;
     ToggleCDRoms            : _CDRom_Record;
     ArcDefs                 : _Archiver_Record;
     BadLang                 : _BadLang_Record;
     Callers                 : ^BigLastCallers;
     Colours                 : _SysColourSVGA;
     FileAreas               : _FileArea_Record;
     FileAreas2              : _FileArea_Record;
     FileDefs                : ^_FileDefinitions;
     FileDefs2               : ^_FileDefinitions;
     FileSubs                : _FileSub_Record;
     LangDir                 : _LanguageDirs_Record;
     LastUserOnline          : _LastHuman_Record;
     MailerInfo              : ^_Mailer_Record;
     MessageAreas            : _MessageArea_Record;
     MessageAreas2           : _MessageArea_Record;
     MessageSubs             : _MessageSub_Record;
     Names                   : _ScreenNames_Record;
     NetWorkInfo             : _Network_Record;
     NewUserVGA              : _NewUserVGA_Record;
     NodeInfo                : ^_Node_Record;
     NodeF                   : _NodeFile_Record;
     Opening                 : _Opening_Record;
     ProtocolInfo            : _Protocols_Record;
     Reports                 : _Report_Record;
     Scanners                : _VirusScanners_Record;
     Shuttle                 : _Shuttle_Record;
     System_Info             : _SystemDat_Record;
     Totals                  : _SystemCalls_Record;
     UserAccess              : _Access_Record;
     UserRecord              : _UsersBBS_Record;
     UserRecord2             : ^_UsersBBS_Record;
     UUCP                    : _UUCP_Record;
     Verifier                : _VerifyLog_Record;

     PageUser                : Pager;
     FPageUser               : File Of Pager;
     CarbonCopy              : CC_Info;
     FCarbonCopy             : File Of CC_Info;
     FFileIndex              : File Of FileSearchIndexes;
     FileIndex               : FileSearchIndexes;
     FileDesc                : ^FileDescriptions2;
     FMsgText                : File Of MessageTextLines;
     FCommentToNext          : File Of COMM_MSG;
     CommentToNext           : COMM_MSG;
     Menu                    : ^Menus;
     SysopLogon              : Boolean;
     NodeNumber              : word;
     NodeString              : string[4];
     Numeric                 : boolean;
     Loaded_Menu             : String[12];
     MenuActive              : Array[1..150] Of Boolean;
     redraw_menu             : boolean;
     new_user_number         : word;
     TaggedFiles             : ^BIGTagged;
     tagged                  : byte;
     do_download             : boolean;
     check_it                : boolean;
     user_name               : String[30];
     Menu_Count              : Word;
     multi_tasker            : string[40];
     user_pages              : byte;
     RealLastCall            : longint;
     ul_ratio                : longint;
     dl_ratio                : longint;
     use_alias               : Boolean;
     doing_logon             : Boolean;
     doing_logoff            : Boolean;
     CurrentDrive            : Char;
     SuccessfulLogon         : Boolean;
     time_for_downloads      : Longint;
     Full_Day                : Longint;
     CurrentMessageArea      : word;
     CurrentMessageSub       : word;
     CurrentFileArea         : word;
     CurrentFileSub          : word;
     Shotgun_Directory       : String[40];
     DATA_Directory          : String[40];
     LANG_Directory          : String[40];
     MENU_Directory          : String[40];
     NEWS_Directory          : String[40];
     NODE_Directory          : String[40];
     GIP_Directory           : String[40];
     HOLD_Directory          : String[40];
     SCAN_Directory          : String[40];
     BIN_Directory           : String[40];
     SIG_Directory           : String[40];
     CD_Directory            : String[40];
     SGDirectory             : String[40];
     LanguageDirectory       : String[40];
     INTR_Directory          : String[40];
     DoingMainKeyPress       : Boolean;
     ChatChannel             : Word;
     PrivateChat             : Boolean;
     ChattingUsers           : Array[1..255] Of Boolean;
     AltKey                  : Boolean;
     ReplyingInitials        : String[10];
     LengthOfInitials        : Byte;
     DOOR_EXECUTED           : Boolean;
     FileUploadArea          : Word;
     FileUploadSub           : Word;
     LastMenuLoaded          : String[12];
     UseSignature            : Boolean;
     WorkBuffer              : ^Work_Buffer;
     InBuffer                : Word;
     CrapString              : String;
     AbortedProtocol         : Boolean;
     BAUDString              : String[1];
     Reserve                 : Array[1..150] Of Byte;
     CurCount                : Word;
     RunningMessageDL        : Word;
     RunningMessageFL        : Word;
     RunningMessageQWK       : Word;
     EnteredEcho             : Boolean;
     EnteredLocal            : Boolean;
     UsersTimeWarning        : Boolean;
     UsersTicker             : EventTimer;
     EventTimeWarning        : Boolean;
     EventMinutes            : Word;
     EventTicker             : EventTimer;
     P256                    : Array[0..767] Of Byte;
     G256                    : Array[0..767] Of Byte;
     GraphLib                : GXLIB;
     SystemFont              : TxHeader;
     HelvFont                : TxHeader;
     RomanFont               : TxHeader;
     BitFont8x8              : TxHeader;
     BitFont8x14             : TxHeader;
     BitFont8x16             : TxHeader;
     YWindow                 : Word;
     GFXBuffer               : ^GFX_Buffer;
     GraphicsLibrary         : String[80];
     FixedDLPath             : String[60];
     FixedLPT                : Byte;
     DidHeader               : Boolean;
     DidHeader2              : Boolean;
     DidMsgInfo              : Boolean;
     DoingMessageEditor      : Boolean;
     SavedTop                : Word;
     SavedTicker             : Longint;
     LastActivity            : Word;
     ToggleInfo              : Toggle_Info;
     REPPacket               : String;
     FastBaseHdr             : Message_Header;
     MsgList                 : ListRecord;
     FMsgList                : File Of ListRecord;
     MsgIndex                : ^Msg_Index;
     CanKill                 : Boolean;
     CanSee                  : Boolean;
     IsYours                 : Boolean;
     CurrentMessageBase      : String[80];
     CurrentMessage          : Word;
     TotalMessages           : Word;
     UserLastReadMsg         : Word;
     HighMsgNumber           : Word;
     Msg_File_Request        : Boolean;
     Msg_File_Attach         : Boolean;
     Msg_Crash               : Boolean;
     Msg_Hold                : Boolean;
     EnteredReply            : Boolean;
     Msg                     : AbsMsgPtr;
     OrigAddr                : AddrType;
     DestAddr                : AddrType;
     QWKIndex                : QWK_Index;
     FQWKIndex               : File Of QWK_Index;
     QWKAreasFound           : Word;
     Control_Dat             : Text;
     Messages_Dat            : File;
     QWKHeaders              : QWK_Header;
     QWKTextBuffer           : ^BigQWKBuffer;
     QWKLastReads            : QWKLastRead;
     FQWKLastReads           : File Of QWKLastRead;
     HighestQWKPointer       : Word;
     PickList                : Pick_List;
     FPickList               : File Of Pick_List;
     PickInfo                : Pick_Info;
     HugePick                : ^Massive_Pick;
     MovedPick               : Boolean;
     SavedCutouts            : Array[1..NumCutouts] Of Saved_Cutouts;
     FMouse                  : File Of _Mouse_Def;
     DefaultMouse            : _Mouse_Def;
     WinMoveMouse            : _Mouse_Def;
     InsertMouse             : _Mouse_Def;
     BPressMouse             : _Mouse_Def;
     BusyMouse               : _Mouse_Def;
     MsgDragMouse            : _Mouse_Def;
     FileDragMouse           : _Mouse_Def;
     Buttons                 : ^Button_Record;
     Fields                  : ^Field_Record;
     Custom                  : ^Custom_Record;
     Animate                 : ^Animated_Record;
     NButtons                : Byte;
     NCustom                 : Byte;
     NAnimate                : Byte;
     NFields                 : Byte;
     ScreenInfo              : Screen_Info;
     RawFile                 : _Raw_File;
     FRawFile                : File Of _Raw_File;
     Icon16                  : _Icon16x16;
     Icon30                  : _Icon30x30;
     FIcon16                 : File Of _Icon16x16;
     FIcon30                 : File Of _Icon30x30;
     PolyPoint               : ^Poly_Points;
     RESOURCES               : String[40];
     GetPut                  : GXHeader;
     GetPut2                 : GXHeader;
     IconHdr                 : GXHeader;
     BMPFile                 : GXHeader;
     WorkFont                : TXHeader;
     LastFont                : String[12];
     LastPressed             : Word;
     SvScreen                : GXHeader;
     UsingBuffer             : Boolean;
     FieldNum                : Word;
     ATimer                  : EventTimer;
     SavedMouseX             : Word;
     SavedMouseY             : Word;
     PadX1                   : Word;
     PadY1                   : Word;
     PadX2                   : Word;
     PadY2                   : Word;
     DidField                : Boolean;
     ScreenBack              : GXHeader;
     WindowBack              : GXHeader;
     OffScreen               : GXHeader;
     CurMouse                : Byte;
     LastMouse               : Byte;
     ScreenNumber            : Word;
     DidDragDrop             : Byte;
     CtrlPt                  : Array [-1..8] Of LiPoint3D;
     Ax,Bx,Cx,Dx             : Real;
     Ay,By,Cy,Dy             : Real;
     WorkWord                : Longint;
     DoQuickLogon            : Boolean;
     LogonUser               : Longint;
     MsgText                 : ^MessageBody;
     OnScreen                : ^OnScreen1;
     Locators                : ^Locators1;
     ThePickFile             : String[70];
     ReplyDomain             : String[60];
     BigCrap                 : Longint;
     NodeListSystem          : String[40];
     Cps                     : Longint;


IMPLEMENTATION


BEGIN
     CurMouse          := 1;
     LastMouse         := 1;
     RunningMessageDL  := 1;
     ScreenInfo.x1     := 32000;
     ScreenInfo.y1     := 32000;
     ScreenInfo.x2     := 32000;
     ScreenInfo.y2     := 32000;
     PadX1             := 32000;
     PadY1             := 32000;
     PadX2             := 32000;
     PadY2             := 32000;
     Cps               := 2880;
END.
